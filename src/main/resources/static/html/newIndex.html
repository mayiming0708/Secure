<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>AdminLTE 2 | Dashboard</title>
		<!-- Tell the browser to be responsive to screen width -->
		<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
		<!-- Bootstrap 3.3.7 -->
		<link rel="stylesheet" href="/static/bower_components/bootstrap/css/bootstrap.min.css">
		<!-- Font Awesome -->
		<link rel="stylesheet" href="/static/font-awesome/css/font-awesome.min.css">
		<!-- Ionicons -->
		<link rel="stylesheet" href="/static/Ionicons/css/ionicons.min.css">
		<!-- Theme style -->
		<link rel="stylesheet" href="/static/css/AdminLTE.css">
		<!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
		<link rel="stylesheet" href="/static/css/_all-skins.css">
		<!-- Morris chart -->
		<!--<link rel="stylesheet" href="css/morris.css">-->
		<link rel="stylesheet" href="/static/css/daterangepicker.css">
		<!-- bootstrap wysihtml5 - text editor -->
		<link rel="stylesheet" href="/static/css/bootstrap3-wysihtml5.min.css">
		<link rel="stylesheet" type="text/css" href="/static/css/dataTables.bootstrap.min.css" />
		<!-- Google Font -->
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
		<link rel="stylesheet" type="text/css" href="/static/css/index.css" />
		<style>
			.sidebar .user-panel {
				display: none;
			}
			
			.sidebar .sidebar-form {
				display: none;
			}
			
			.sidebar-menu.tree li.header {
				display: none;
			}
			
			.temporary-task {
				margin-bottom: 20px;
				background: #fff;
				box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
				border-radius: 3px;
				height: 300px;
			}
			
			.temporary-task .title {
				line-height: 35px;
				padding: 0 10px;
				font-size: 20px;
				color: #444;
			}
			
			.pull-left.header .fa-inbox {
				color: lightseagreen;
			}
			
			.nav-tabs-custom {
				/*box-shadow: 0 0 2px rgba(0,0,0,0.3);*/
				border-radius: 10px;
			}
			
			#tempory-task .flow {
				margin-top: 18px;
				position: relative;
				display: inline-block;
				float: left;
			}
			
			#tempory-task .line {
				position: absolute;
				width: 2px;
				border-radius: 5px;
				height: 240px;
				background-color: lightblue;
				left: 78%;
			}
			
			#tempory-task .flow-img {
				display: inline-block;
				list-style-type: none;
				position: relative;
				z-index: 2;
			}
			
			#tempory-task .flow-img li {
				height: 78px;
			}
			.bug-faq-right{
			}
			#bug-type-chart4{
				width: 100%;
			}
			#bug-faq-chart2 div:first-child{

			}
			#site-faq-chart{
				width: 100%;
				height: 100%;
			}
			#bug-faq-chart2{
				width: 100%;
				height: 100%;
			}
		</style>
	</head>

	<body class="hold-transition skin-blue sidebar-mini">
		<div class="wrapper">

			<header class="main-header">
				<!-- Logo -->
				<a href="#" class="logo">
					<!-- mini logo for sidebar mini 50x50 pixels -->
					<span class="logo-mini"><b>WE</b>B</span>
					<!-- logo for regular state and mobile devices -->
					<span class="logo-lg"><b>WEB</b>SOCK</span>
				</a>
				<!-- Header Navbar: style can be found in header.less -->
				<nav class="navbar navbar-static-top">
					<!-- Sidebar toggle button-->
					<a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
						<span class="sr-only">Toggle navigation</span>
					</a>

					<div class="navbar-custom-menu">
						<ul class="nav navbar-nav">
							<!-- Messages: style can be found in dropdown.less-->
							<li class="dropdown messages-menu">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">
									<i class="fa fa-envelope-o"></i>
									<span class="label label-success"></span>
								</a>
						</li>
							<!-- Notifications: style can be found in dropdown.less -->
							<li class="dropdown notifications-menu">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">
									<i class="fa fa-bell-o"></i>
									<span class="label label-warning"></span>
								</a>
						</li>
							<!-- Tasks: style can be found in dropdown.less -->
							<li class="dropdown tasks-menu">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">
									<i class="fa fa-flag-o"></i>
									<span class="label label-danger"></span>
								</a>
							</li>
							<!-- User Account: style can be found in dropdown.less -->
							<li class="dropdown user user-menu">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">
									<img src="/static/image/user2-160x160.jpg" class="user-image" alt="User Image">
									<span class="hidden-xs">Alexander Pierce</span>
								</a>
								<ul class="dropdown-menu">
									<!-- User image -->
									<li class="user-header">
										<img src="/static/image/user2-160x160.jpg" class="img-circle" alt="User Image">

									</li>
									<!-- Menu Body -->
									<li class="user-body">
										<div class="row">
											<div class="col-xs-4 text-center">
												<a href="#" class="btn btn-default btn-flat" id="changePassword">修改密码</a>
											</div>
											<div class="col-xs-4 text-center">
												<a href="#" class="btn btn-default btn-flat" id="changeEmail">修改邮箱</a>
											</div>
											<div class="col-xs-4 text-center">
												<a href="#" class="btn btn-default btn-flat" id="signOut">登出</a>
											</div>
										</div>
										<!-- /.row -->
									</li>
									<!-- Menu Footer-->

								</ul>

							</li>
							<!-- Control Sidebar Toggle Button -->
							<li>
								<a href="#" data-toggle="control-sidebar"><i class="fa fa-gears"></i></a>
							</li>
						</ul>
					</div>
				</nav>
			</header>
			<!-- Left side column. contains the logo and sidebar -->
			<aside class="main-sidebar">
				<!-- sidebar: style can be found in sidebar.less -->
				<section class="sidebar">
					<!-- Sidebar user panel -->
					<div class="user-panel">
						<div class="pull-left image">
							<img src="/static/image/user3-128x128.jpg" class="img-circle" alt="User Image">
						</div>
						<div class="pull-left info">
							<p>Alexander Pierce</p>
							<a href="#"><i class="fa fa-circle text-success"></i> Online</a>
						</div>
					</div>
					<!-- search form -->
					<form action="#" method="get" class="sidebar-form">
						<div class="input-group">
							<input type="text" name="q" class="form-control" placeholder="Search...">
							<span class="input-group-btn">
                <button type="submit" name="search" id="search-btn" class="btn btn-flat"><i class="fa fa-search"></i>
                </button>
              </span>
						</div>
					</form>
					<!-- /.search form -->
					<!-- sidebar menu: : style can be found in sidebar.less -->
					<ul class="sidebar-menu" data-widget="tree">

						<li class="active">
							<a href="newIndex">
								<i class="fa fa-th"></i> <span>首页</span>
								<span class="pull-right-container">
					              <small class="label pull-right bg-green">new</small>
					            </span>
							</a>
						</li>
						<li>
							<a href="taskprogress">
								<i class="fa fa-calendar"></i> <span>任务视图</span>
								<span class="pull-right-container">
					            </span>
							</a>
						</li>
						<li>
							<a href="sitemonitor">
								<i class="fa fa-calendar"></i> <span>网站视图</span>
								<span class="pull-right-container">
					            </span>
							</a>
						</li>
					</ul>
				</section>
				<!-- /.sidebar -->
			</aside>

			<!-- Content Wrapper. Contains page content -->
			<div class="content-wrapper">
				<!-- Content Header (Page header) -->
				<section class="content-header">

				</section>

				<!-- Main content -->
				<section class="content">
					<!-- Small boxes (Stat box) -->
					<!--<div class="row">
      	<div class="col-lg-6">
      		<div class="temporary-task">
      			<div class="title">
      				<i class="fa fa-calendar-check-o"></i> 下发临时任务
      			</div>
      		</div>
      	</div>
      </div>-->
					<!--第一层row-->
					
					<div class="row">
						<div class="col-lg-3 col-xs-6">
							<!-- small box -->
							<div class="small-box bg-aqua">
								<div class="inner">
									<h3><span>0</span><sup style="font-size: 20px">次</sup></h3>

									<p>下发任务次数</p>
								</div>
								<div class="icon">
									<i class="ion ion-bag"></i>
								</div>
								<a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
							</div>
						</div>
						<!-- ./col -->
						<div class="col-lg-3 col-xs-6">
							<!-- small box -->
							<div class="small-box bg-green">
								<div class="inner">
									<h3><span>0</span><sup style="font-size: 20px">个</sup></h3>

									<p>检测网站个数</p>
								</div>
								<div class="icon">
									<i class="ion ion-stats-bars"></i>
								</div>
								<a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
							</div>
						</div>
						<!-- ./col -->
						<div class="col-lg-3 col-xs-6">
							<!-- small box -->
							<div class="small-box bg-yellow">
								<div class="inner">
									<h3><span>0</span><sup style="font-size: 20px">个</sup></h3>

									<p>漏洞与安全事件个数</p>
								</div>
								<div class="icon">
									<i class="ion ion-person-add"></i>
								</div>
								<a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
							</div>
						</div>
						<!-- ./col -->
						<div class="col-lg-3 col-xs-6">
							<!-- small box -->
							<div class="small-box bg-red">
								<div class="inner">
									<h3><span>0</span><sup style="font-size: 20px">s</sup></h3>

									<p>平均检索时间</p>
								</div>
								<div class="icon">
									<i class="ion ion-pie-graph"></i>
								</div>
								<a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
							</div>
						</div>
						<!-- ./col -->
					</div>
					<div class="row">
						<section class="col-lg-6 connectedSortable">
							<div class="box box-success  check-site">
									<div class="check-site-title col-md-2">
										<span>下发任务</span>
										<i class="fa fa-map-o"></i>
									</div>
										<div class="check-site-chart col-md-10">
											<div class="chart tab-pane active temporary-task-total" id="tempory-task" style="position: relative;">
										<div class="left-part">
											<div class="form-groups" id="task-type">
												<label for="name">任务类型<p class="prompt"></p></label>
												<select name="task-type-choose">
													<option value="0">临时任务</option>
													<option value="1">周期任务</option>
												</select>
											</div>
											<div class="form-groups" id="tempory-site-name">
												<label for="name">站点名称<p class="prompt">(*站点名称为必填项，多个站点名请以逗号分隔)</p></label>
												<input type="text" class="form-control" id="name" placeholder="请输入站点名称">
											</div>
											
											<div class="choose-title">检测项</div>
											<ul class="choose-item clearfix">
												<li data='0' class="all">全部</li>
												<li data='0'>暗链</li>
												<li data='0'>挂马</li>
												<li data='0'>关键词</li>
												<li data='0'>SQL注入漏洞</li>
												<li data='0'>XSS跨站脚本漏洞</li>
												<li data='0'>应用漏洞</li>
												<li data='0'>信息泄露</li>
												<li data='0'>CGI漏洞</li>
												<li data='0'>CSRF跨站请求伪造漏洞</li>
												<li data='0'>表单破解漏洞</li>
											</ul>
										</div>
										<div class="commit-btn" id="tempory-task-btn">
											提交任务
										</div>
										<div class="cover">
									
								</div>
								<div class="pop-alert">
									<div class="title"><i class="fa fa-warning"></i><span>下发任务失败</span></div>
									<div class="pop-alert-content">
										
									</div>
									<button type="button" class="btn btn-block btn-primary btn-flat">确定</button>
								</div>
									</div>
									
										</div>
							</div>
						</section>
						<section class="col-lg-6 connectedSortable">
									<div class="nav-tabs-custom temporary-task-total">
								<!-- Tabs within a box -->
								<ul class="nav nav-tabs pull-right">
									<li class="active">
										<a href="#site-faq" data-toggle="tab" class="sitetab">网站风险分布</a>
									</li>
									<li>
										<a href="#bug-faq" data-toggle="tab" class="leaktab">漏洞与安全事件风险分布</a>
									</li>
									<!--<li class="pull-left header"><i class="fa fa-inbox"></i> 下发临时任务</li>-->
								</ul>
								<div class="tab-content no-padding">

									<div class="chart tab-pane active" id="site-faq" style="position: relative; ">
									<div class="site-faq-left col-md-6">
										<div class="info">
											<p class="title">网站历史风险值排名</p>
											<ul class="rank-list">
												<li class="clearfix top1"><img src="/static/image/canteen-top1.png">
													<div class="center">
														<div class="site-name"></div>
													</div>
													<div class="progress" style="display: none;">
														<div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width:0%;">
															<span class="sr-only">40% 完成</span>
														</div>
													</div><span class="score"></span>
												</li>
													<li class="clearfix top2"><img src="/static/image/canteen-top2.png">
													<div class="center">
														<div class="site-name"></div>
													</div>
													<div class="progress"  style="display: none;">
														<div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width:0%;">
															<span class="sr-only">40% 完成</span>
														</div>
													</div><span class="score">0</span>
												</li>
													<li class="clearfix top3"><img src="/static/image/canteen-top3.png">
													<div class="center">
														<div class="site-name">--</div>
													</div>
													<div class="progress" style="display: none;">
														<div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
															<span class="sr-only">40% 完成</span>
														</div>
													</div><span class="score"></span>
												</li>
											</ul>
										</div>
									</div>
										<div class="site-faq-right col-md-6">
											<div id="site-faq-chart"></div>
										</div>
									</div>
									<div class="chart tab-pane clearfix" id="bug-faq" style="position: relative;">
										<div class="bug-faq-left col-md-6">
											<div class="info">
											<p class="title">高危漏洞安全事件类型排名</p>
											<ul class="bug-rank-list">
												<li class="clearfix">
													<img src="/static/image/canteen-top1.png">
													<div class="bug-rank-list-center">
														<div class="site-name bug-name">暗链</div>
														<div class="progress">
															<div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 40%;">
																<span class="sr-only">40% 完成</span>
															</div>
														</div>
													</div>
													<span class="count">68</span>
												</li>
													<li class="clearfix"><img src="/static/image/canteen-top2.png">
														<div class="bug-rank-list-center">
															<div class="site-name bug-name">暗链</div>
															<div class="progress">
																<div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 40%;">
																	<span class="sr-only">40% 完成</span>
																</div>
															</div>
														</div>
														<span class="count">65</span>
												</li>
													<li class="clearfix"><img src="/static/image/canteen-top3.png">
														<div class="bug-rank-list-center">
															<div class="site-name bug-name">暗链</div>
															<div class="progress">
																<div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 40%;">
																	<span class="sr-only">40% 完成</span>
																</div>
															</div>
														</div>
														<span class="count">60</span>
												</li>
											</ul>
										</div>
										</div>
										<div class="bug-faq-right col-md-6">
											<div id="bug-faq-chart2" style="width: 100%;height: 100%"></div>
										</div>
									</div>
								</div>
							</div>
						</section>
					</div>
					<div class="row">
						<section class="col-lg-8 connectedSortable">
							<div class="nav-tabs-custom bug-type-left">
								<ul class="nav nav-tabs pull-right">
									<li class="active">
										<a href="#bug-type-chartQ1" data-toggle="tab">漏洞与安全事件类型风险分布图</a>
									</li>
									<li>
										<a href="#bug-type-chartQ2" data-toggle="tab">漏洞与安全事件风险类型分布图</a>
									</li>
								</ul>
								<div class="tab-content no-padding">
									<div class="chart tab-pane active bug-type-chart2" id="bug-type-chartQ1" style="position: relative; height: 400px;">
										<div id="bug-type-chart2" style="width: 100%;height: 100%"></div>
									</div>
									<div class="chart tab-pane bug-type-chart4" style="height: 400px;" id="bug-type-chartQ2">
										<div id="bug-type-chart4" style="width: 100%;height: 100%"></div>
									</div>
								</div>
							</div>
						</section>
						<section class="col-lg-4 connectedSortable">
							<div class="box box-success bug-type-right">
								<div class="title">
									网站漏洞安全类型占比
								</div>
								<div class="bug-type-chart3" id="bug-type-chart3">
									
								</div>
							</div>
							
						</section>
					</div>
				</section>
				<!-- /.content -->
			</div>
			<!-- /.content-wrapper -->
			<footer class="main-footer">
				<div class="pull-right hidden-xs">
					<b>Version</b> 2.4.0
				</div>
				<strong>©2019 All right reserved. 陇ICP备18001310号-2</strong>
			</footer>

			<!-- Control Sidebar -->
			<aside class="control-sidebar control-sidebar-dark">
				<!-- Create the tabs -->
				<ul class="nav nav-tabs nav-justified control-sidebar-tabs">
					<li>
						<a href="#control-sidebar-home-tab" data-toggle="tab"><i class="fa fa-home"></i></a>
					</li>
					<li>
						<a href="#control-sidebar-settings-tab" data-toggle="tab"><i class="fa fa-gears"></i></a>
					</li>
				</ul>
				<!-- Tab panes -->
				<div class="tab-content">
					<!-- Home tab content -->
					<div class="tab-pane" id="control-sidebar-home-tab">
						<h3 class="control-sidebar-heading">Recent Activity</h3>
						<ul class="control-sidebar-menu">
							<li>
								<a href="javascript:void(0)">
									<i class="menu-icon fa fa-birthday-cake bg-red"></i>

									<div class="menu-info">
										<h4 class="control-sidebar-subheading">Langdon's Birthday</h4>

										<p>Will be 23 on April 24th</p>
									</div>
								</a>
							</li>
							<li>
								<a href="javascript:void(0)">
									<i class="menu-icon fa fa-user bg-yellow"></i>

									<div class="menu-info">
										<h4 class="control-sidebar-subheading">Frodo Updated His Profile</h4>

										<p>New phone +1(800)555-1234</p>
									</div>
								</a>
							</li>
							<li>
								<a href="javascript:void(0)">
									<i class="menu-icon fa fa-envelope-o bg-light-blue"></i>

									<div class="menu-info">
										<h4 class="control-sidebar-subheading">Nora Joined Mailing List</h4>

										<p>nora@example.com</p>
									</div>
								</a>
							</li>
							<li>
								<a href="javascript:void(0)">
									<i class="menu-icon fa fa-file-code-o bg-green"></i>

									<div class="menu-info">
										<h4 class="control-sidebar-subheading">Cron Job 254 Executed</h4>

										<p>Execution time 5 seconds</p>
									</div>
								</a>
							</li>
						</ul>
						<!-- /.control-sidebar-menu -->

						<h3 class="control-sidebar-heading">Tasks Progress</h3>
						<ul class="control-sidebar-menu">
							<li>
								<a href="javascript:void(0)">
									<h4 class="control-sidebar-subheading">
                Custom Template Design
                <span class="label label-danger pull-right">70%</span>
              </h4>

									<div class="progress progress-xxs">
										<div class="progress-bar progress-bar-danger" style="width: 70%"></div>
									</div>
								</a>
							</li>
							<li>
								<a href="javascript:void(0)">
									<h4 class="control-sidebar-subheading">
                Update Resume
                <span class="label label-success pull-right">95%</span>
              </h4>

									<div class="progress progress-xxs">
										<div class="progress-bar progress-bar-success" style="width: 95%"></div>
									</div>
								</a>
							</li>
							<li>
								<a href="javascript:void(0)">
									<h4 class="control-sidebar-subheading">
                Laravel Integration
                <span class="label label-warning pull-right">50%</span>
              </h4>

									<div class="progress progress-xxs">
										<div class="progress-bar progress-bar-warning" style="width: 50%"></div>
									</div>
								</a>
							</li>
							<li>
								<a href="javascript:void(0)">
									<h4 class="control-sidebar-subheading">
                Back End Framework
                <span class="label label-primary pull-right">68%</span>
              </h4>

									<div class="progress progress-xxs">
										<div class="progress-bar progress-bar-primary" style="width: 68%"></div>
									</div>
								</a>
							</li>
						</ul>
						<!-- /.control-sidebar-menu -->

					</div>
					<!-- /.tab-pane -->
					<!-- Stats tab content -->
					<div class="tab-pane" id="control-sidebar-stats-tab">Stats Tab Content</div>
					<!-- /.tab-pane -->
					<!-- Settings tab content -->
					<div class="tab-pane" id="control-sidebar-settings-tab">
						<form method="post">
							<h3 class="control-sidebar-heading">General Settings</h3>

							<div class="form-group">
								<label class="control-sidebar-subheading">
              Report panel usage
              <input type="checkbox" class="pull-right" checked>
            </label>

								<p>
									Some information about this general settings option
								</p>
							</div>
							<!-- /.form-group -->

							<div class="form-group">
								<label class="control-sidebar-subheading">
              Allow mail redirect
              <input type="checkbox" class="pull-right" checked>
            </label>

								<p>
									Other sets of options are available
								</p>
							</div>
							<!-- /.form-group -->

							<div class="form-group">
								<label class="control-sidebar-subheading">
              Expose author name in posts
              <input type="checkbox" class="pull-right" checked>
            </label>

								<p>
									Allow the user to show his name in blog posts
								</p>
							</div>
							<!-- /.form-group -->

							<h3 class="control-sidebar-heading">Chat Settings</h3>

							<div class="form-group">
								<label class="control-sidebar-subheading">
              Show me as online
              <input type="checkbox" class="pull-right" checked>
            </label>
							</div>
							<!-- /.form-group -->

							<div class="form-group">
								<label class="control-sidebar-subheading">
              Turn off notifications
              <input type="checkbox" class="pull-right">
            </label>
							</div>
							<!-- /.form-group -->

							<div class="form-group">
								<label class="control-sidebar-subheading">
              Delete chat history
              <a href="javascript:void(0)" class="text-red pull-right"><i class="fa fa-trash-o"></i></a>
            </label>
							</div>
							<!-- /.form-group -->
						</form>
					</div>
					<!-- /.tab-pane -->
				</div>
			</aside>
			<div class="control-sidebar-bg"></div>
			<!--修改密码弹窗-->
			<div class="modal-change-password" id="modalChangePassword"></div>
			<!--修改密码弹窗背景-->
			<div class="progress-bg"></div>
			<!--修改邮箱弹窗-->
			<div class="modal-change-email" id="modalChangeEmail"></div>

		</div>
		<!-- ./wrapper -->

		<!-- jQuery 3 -->
		<script src="/static/js/jquery.min.js"></script>
		<!-- jQuery UI 1.11.4 -->
		<script src="/static/js/jquery-ui.min.js"></script>
		<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
		<script>
			$.widget.bridge('uibutton', $.ui.button);
		</script>
		<!-- Bootstrap 3.3.7 -->
		<script src="/static/js/bootstrap.min.js"></script>
		<!-- daterangepicker -->
		<script src="/static/js/moment.min.js"></script>
		<script src="/static/js/daterangepicker.js"></script>
		<!-- datepicker -->
		<script src="/static/js/bootstrap-datepicker.min.js"></script>
		<!-- Bootstrap WYSIHTML5 -->
		<script src="/static/js/bootstrap3-wysihtml5.all.min.js"></script>
		<!-- Slimscroll -->
		<script src="/static/js/jquery.slimscroll.min.js"></script>
		<!-- FastClick -->
		<script src="/static/js/fastclick.js"></script>
		<!--表格插件-->
		<script src="/static/js/jquery.dataTables.min.js" type="text/javascript" charset="utf-8"></script>
		<!--<script src="/static/js/dataTables.bootstrap.min.css" type="text/javascript" charset="utf-8"></script>-->
		<!-- AdminLTE App -->
		<script src="/static/js/adminlte.min.js"></script>
		<script src="/static/js/echarts.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="/static/js/common.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
            var temAlert = $(".temporary-task-total .pop-alert-content");
            var temCover = $(".temporary-task-total .cover");
            var temPop = $(".temporary-task-total .pop-alert");
            var temBtn = $(".temporary-task-total button");
            var temTitle = $(".temporary-task-total  .pop-alert .title");
            var taskType= $(".temporary-task-total select");
            //获取到cookie值
            var userId=getCookie("userId");
            //漏洞风险分布图表
			var bugfaq=echarts.init(document.getElementById('bug-faq-chart2'));
			//网站风险分布
			var sitebugfaq = echarts.init(document.getElementById('site-faq-chart'));

			var bugtypechart4 = echarts.init(document.getElementById('bug-type-chart4'));

			var bugtypechart3 = echarts.init(document.getElementById('bug-type-chart3'));

			var bugtypechart2 = echarts.init(document.getElementById('bug-type-chart2'));
			//设置任务下发的状态
			var flag=1;
			$(function() {
                judgeCookie();
                getIndexData();
				//下发临时任务检测项
                $(".choose-item li.all").click(function() {
                    if($(this).hasClass('active')) {
                      	$(".choose-item li").removeClass('active');
                        $(".choose-item li").attr('data', '0');
                    } else {
                        $(".choose-item li").addClass('active');
                        $(".choose-item li").attr('data', '1');
                    }

                });
				$(".choose-item li:not('.all')").click(function() {
					if($(this).hasClass('active')) {
						$(this).removeClass('active');
						$(this).attr('data', '0');
                        $(".choose-item li.all").removeClass('active');
                        $(".choose-item li.all").attr('data', '0');
					} else {
						$(this).addClass('active');
						$(this).attr('data', '1');
					}

				});
				//点击提交按钮
				$(".commit-btn").click(function() {
					var checkItem=[];
					var choose = '';
					var reg = '(https?|ftp|file)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]';
					var site = $("#tempory-site-name #name");
					var siteVal = site.val();
					var siteArr = siteVal.split(',');
					var taskTypeVal=taskType.val();

					$("#tempory-task .choose-item li").each(function() {
						checkItem.push($(this).attr('data'));
						if($(this).attr('data') == 1) {
							choose = choose + 1;
						}
					})
					if(siteVal == '' || siteVal == null || siteVal == undefined) {
                        temTitle.find('.fa').removeClass('fa-chevron-circle-down');
                        temTitle.find('.fa').addClass('fa-warning');
                        temTitle.find('span').html('下发任务失败');
						temAlert.html('请填写站点名');
                        temCover.show();
                        temPop.show();
						return false;
					} else {
						for(var i = 0; i < siteArr.length; i++) {
							if(!siteArr[i].match(reg)) {
                                temTitle.find('.fa').removeClass('fa-chevron-circle-down');
                                temTitle.find('.fa').addClass('fa-warning');
                                temTitle.find('span').html('下发任务失败');
								temAlert.html('填写的网站有误');
                                temCover.show();
                                temPop.show();
								return false;
							}
						}
					}
					if(choose == 0) {
                        temTitle.find('.fa').removeClass('fa-chevron-circle-down');
                        temTitle.find('.fa').addClass('fa-warning');
                        temTitle.find('span').html('下发任务失败');
						temAlert.html('请选择检测项');
                        temCover.show();
                        temPop.show();
						return false;
					}else{
                        //选择好之后调取下发任务的接口
                        indexAddTask(taskTypeVal,siteVal,checkItem);
					}
				});

				//点击确定按钮 弹窗消失
				temBtn.click(function() {
					temCover.hide();
					temPop.hide();
				});
				//传给后台的值
				//下发周期任务的时间选择器
				$(".date-picker").datepicker({
					language: "zh-CN",
					autoclose: true
				});
				$('#example2').DataTable({
					'paging': true,
					'lengthChange': false,
					'searching': false,
					'ordering': true,
					'info': true,
					'autoWidth': false,
					"sScrollY": 270, //DataTables的高  
					"oLanguage": {
						"sLengthMenu": "每页显示 _MENU_ 条记录",
						"sZeroRecords": "对不起，查询不到任何相关数据",
						"sInfo": "当前显示 _START_ 到 _END_ 条，共 _TOTAL_条记录",
						"sInfoEmtpy": "找不到相关数据",
						"sInfoFiltered": "数据表中共为 _MAX_ 条记录)",
						"sProcessing": "正在加载中...",
						"sSearch": "搜索",
						"oPaginate": {
							"sFirst": "第一页",
							"sPrevious": " 上一页 ",
							"sNext": " 下一页 ",
							"sLast": " 最后一页 "
						},
					}
				});
				$('#result-list').DataTable({
					'paging': true,
					'lengthChange': false,
					'searching': false,
					'ordering': true,
					'info': true,
					'autoWidth': false,
					"oLanguage": {
						"sLengthMenu": "每页显示 _MENU_ 条记录",
						"sZeroRecords": "对不起，查询不到任何相关数据",
						"sInfo": "当前显示 _START_ 到 _END_ 条，共 _TOTAL_条记录",
						"sInfoEmtpy": "找不到相关数据",
						"sInfoFiltered": "数据表中共为 _MAX_ 条记录)",
						"sProcessing": "正在加载中...",
						"sSearch": "搜索",
						"oPaginate": {
							"sFirst": "第一页",
							"sPrevious": " 上一页 ",
							"sNext": " 下一页 ",
							"sLast": " 最后一页 "
						},
					}
				});
                //echarts图形添加屏幕自适应
                window.addEventListener("resize", function () {
                    bugfaq.resize();
					sitebugfaq.resize();
					bugtypechart4.resize();
					bugtypechart3.resize();
					bugtypechart2.resize();
                });


                //点击网站历史风险值排名跳转到该网站
					$(".rank-list li .site-name").click(function(){
					    var url=$(this).html();
					    window.location.href= "sitedetail?url="+url;

					})
            });

			//网站风险分布
			function checkSite() {
				var myChart = echarts.init(document.getElementById('check-site-chart'));

				var option = {
					tooltip: {
						trigger: 'item',
						formatter: "{a} <br/>{b} : {c} ({d}%)"
					},
					series: [{
						name: '库存情况',
						type: 'pie',
						radius: '68%',
						center: ['50%', '50%'],
						clockwise: false,
						data: [{
							value: 45,
							name: '高危'
						}, {
							value: 25,
							name: '中危'
						}, {
							value: 15,
							name: '低危'
						}, {
							value: 8,
							name: '信息'
						}],
						label: {
							normal: {
								textStyle: {
									color: '#000',
									fontSize: 14,
								}
							}
						},
						labelLine: {
							normal: {
								show: true,
								color: '#000'
							}
						},
						itemStyle: {
							normal: {
								borderWidth: 4,
								borderColor: '#ffffff',
							},
							emphasis: {
								borderWidth: 0,
								shadowBlur: 10,
								shadowOffsetX: 0,
								shadowColor: 'rgba(0, 0, 0, 0.5)'
							}
						}
					}],
					color: [
						'#00acee',
						'#52cdd5',
						'#79d9f1',
						'#a7e7ff',
						'#c8efff'
					],
					backgroundColor: '#fff'
				};
				myChart.setOption(option);
			}

//			checkSite();//针对检测项展示的高危，中危，低危
			function bugTypeChart2(data) {
				var data = [{
						name: '暗链',
						count1: data.blackLinks.high,
						count2: data.blackLinks.middle,
						count3: data.blackLinks.low
					},
					{
						name: '挂马',
                        count1: data.malscan.high,
                        count2: data.malscan.middle,
                        count3: data.malscan.low
					},
					{
						name: '关键词',
                        count1: data.keyword.high,
                        count2: data.keyword.middle,
                        count3: data.keyword.low
					},
					{
						name: 'sql注入漏洞',
                        count1: data.sql.high,
                        count2: data.sql.middle,
                        count3: data.sql.low
					},
					{
						name: 'XSS跨站脚本漏洞',
                        count1: data.xss.high,
                        count2: data.xss.middle,
                        count3: data.xss.low
					},
					{
						name: '应用漏洞',
                        count1: data.webvul.high,
                        count2: data.webvul.middle,
                        count3: data.webvul.low
					},
					{
						name: '信息泄露',
                        count1: data.infoLeak.high,
                        count2: data.infoLeak.middle,
                        count3: data.infoLeak.low
					},
					{
						name: 'CGI漏洞',
                        count1: data.cgi.high,
                        count2: data.cgi.middle,
                        count3: data.cgi.low
					},
					{
						name: 'CSRF跨站请求伪造漏洞',
                        count1: data.csrf.high,
                        count2: data.csrf.middle,
                        count3: data.csrf.low
					},
					{
						name: '表单破解漏洞',
                        count1: data.formCrack.high,
                        count2: data.formCrack.middle,
                        count3: data.formCrack.low
					},
				]
				var names = data.map(v => {
					return v.name
				});
				var count1 = data.map(v => {
					return v.count1
				});
				var count2 = data.map(v => {
					return v.count2
				});
				var count3 = data.map(v => {
					return v.count3
				});
				// var myChart = echarts.init(document.getElementById('bug-type-chart2'));
				option = {
					// title: {
					// 	text: '漏洞与安全事件风险分布图'
					// },
					backgroundColor: '#fff',
					color: ['#FF9E67', '#FFC376', '#FFD6B7'],
					barWidth: 50,
					tooltip: {
						trigger: 'axis',
						axisPointer: { // 坐标轴指示器，坐标轴触发有效
							type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
						},
						backgroundColor: '#fff',
						extraCssText: 'box-shadow: 0px 0px 8px 0px rgba(0,0,0,0.2);',
						textStyle: {
							color: "#333",
						}
					},
					grid: {
						left: '5%',
						right: '5%',
						bottom: '0%',
						top: '15%',
						containLabel: true
					},
					legend: {
						align: 'right',
						position: 'right',
						right: 0,
						top: 30,
					},
					xAxis: {
						type: 'category',
						axisLabel: {
							//          formatter: function(name) {
							////              return echarts.format.truncateText(name, 60, '10px Microsoft Yahei', '…');
							//          }
							rotate: 35,
						},
						data: names
					},
					yAxis: {
						type: 'value',
						splitLine: {
							show: true,
							lineStyle: {
								color: ['#f2f2f2']
							}
						},
					},
					series: [{
							type: 'bar',
							name: '高危',
							stack: '总量',
							data: count1
						},
						{
							type: 'bar',
							name: '中危',
							stack: '总量',
							data: count2
						},
						{
							type: 'bar',
							name: '低危',
							stack: '总量',
							data: count3
						}
					]
				};
				bugtypechart2.clear();
				bugtypechart2.setOption(option);
				bugtypechart2.resize();
				window.onresize = bugtypechart2.resize;

			}
			// bugTypeChart2();//网站漏洞类型占比
			function bugTypeChart3(chart3Data,bugTotal) {
				// var myChart = echarts.init(document.getElementById('bug-type-chart3'));
				var colorList = [
                    '#66c5d7', '#11c88c', '#989cff', '#ffa55d', '#9c7de1', '#5d9eff', '#ffdb5d', '#ee82ed', '#8fca5f', '#b995f5'
                ];

				// 总和
				var total = {
					value: bugTotal,
					name: '漏洞与安全事件数'
				}

				var originalData = [{
					value: chart3Data[6],
					name: '暗链'
				}, {
					value: chart3Data[9],
					name: '挂马'
				}, {
					value: chart3Data[8],
					name: "关键词"
				}, {
					value: chart3Data[1],
					name: "SQL注入漏洞"
				}, {
					value: chart3Data[2],
					name: "XSS跨站脚本漏洞"
				}, {
					value: chart3Data[0],
					name: "应用漏洞"
				}, {
					value: chart3Data[5],
					name: "信息泄露"
				}, {
					value: chart3Data[4],
					name: "CGI漏洞"
				}, {
					value: chart3Data[7],
					name: "CSRF跨站请求伪造漏洞"
				}, {
					value: chart3Data[3],
					name: "表单破解漏洞"
				}];

				echarts.util.each(originalData, function(item, index) {
					item.itemStyle = {
						normal: {
							color: colorList[index]
						}
					};
				});

				var option = {
					tooltip: {
						trigger: 'item',
						formatter: '{b}: {c} ({d}%)'
					},
					backgroundColor: '#ffffff',
					legend: {
						show: true,
						left: 0,
						bottom: 0,
					},
					grid: {
						bottom: 0
					},
					title: [{
						text: total.name,
						left: '49%',
						top: '35%',
						textAlign: 'center',
						textBaseline: 'middle',
						textStyle: {
							color: '#999',
							fontWeight: 'normal',
							fontSize: 18
						}
					}, {
						text: total.value,
						left: '49%',
						top: '43%',
						textAlign: 'center',
						textBaseline: 'middle',
						textStyle: {
							color: '#666',
							fontWeight: 'normal',
							fontSize: 30
						}
					}],
					series: [{
						hoverAnimation: false, //设置饼图默认的展开样式
						center: ['50%', '40%'],
						radius: [100, 120],
						name: 'pie',
						type: 'pie',
						selectedMode: 'single',
						selectedOffset: 16, //选中是扇区偏移量
						clockwise: true,
						startAngle: 90,
						label: {
							normal: {
								show: false
							}
						},
						labelLine: {
							normal: {
								show: false
							}
						},
						itemStyle: {
							normal: {
								borderWidth: 3,
								borderColor: '#ffffff',
							},
							emphasis: {
								borderWidth: 0,
								shadowBlur: 5,
								shadowOffsetX: 0,
								shadowColor: 'rgba(0, 0, 0, 0.2)'
							}
						},
						data: originalData
					}]
				};
				bugtypechart3.clear();
				bugtypechart3.setOption(option);
				bugtypechart3.resize();
				window.onresize = bugtypechart3.resize;
			}
			// bugTypeChart3();//网站风险饼图
			function siteFaqChart(highlevel,midlevel,lowlevel,safe){
					var option = {
						tooltip: {
							trigger: 'item',
							formatter: "{a} <br/>{b} : {c} ({d}%)"
						},
						grid:{
							left:'5%',
							 containLabel: true
						},
						series: [{
							name: '库存情况',
							type: 'pie',
							radius: '52%',
							center: ['50%', '50%'],
							clockwise: false,
							data: [{
								value: highlevel,
								name: '高危'
							}, {
								value: midlevel,
								name: '中危'
							}, {
								value: lowlevel,
								name: '低危'
							}, {
								value: safe,
								name: '信息'
							}],
							label: {
								normal: {
									textStyle: {
										color: '#000',
										fontSize: 14,
									},
								}
							},
							labelLine: {
								normal: {
									show: true,
									color: '#000'
								}
							},
							itemStyle: {
								normal: {
									borderWidth: 4,
									borderColor: '#ffffff',
								},
								emphasis: {
									borderWidth: 0,
									shadowBlur: 10,
									shadowOffsetX: 0,
									shadowColor: 'rgba(0, 0, 0, 0.5)'
								}
							}
						}],
						color: [
							'#00acee',
							'#52cdd5',
							'#79d9f1',
							'#a7e7ff',
							'#c8efff'
						],
						backgroundColor: '#fff'
					};
				sitebugfaq.clear();
				sitebugfaq.setOption(option,true);
				sitebugfaq.resize();
				window.onresize = sitebugfaq.resize;
			}
			// siteFaqChart();

			//漏洞风险分布
			function bugFaqChart(data) {
				$("#bug-faq-chart2").css('width',$("#site-faq-chart").width());
				$("#bug-faq-chart2").css('height',$("#site-faq-chart").height());
				// var myChart = echarts.init(document.getElementById('bug-faq-chart2'));
				//ehcarts重构

				var colorList = [
					'#66c5d7', '#11c88c', '#989cff'
				];

				// 总和
				var total = {
					value: data.bugCounts,
					name: '漏洞与安全事件数'
				}

				var originalData = [{
					value: data.higBugs,
					name: '高危'
				}, {
					value: data.middleBugs,
					name: '中危'
				}, {
					value: data.lowBugs,
					name: "低危"
				}];

				echarts.util.each(originalData, function(item, index) {
					item.itemStyle = {
						normal: {
							color: colorList[index]
						}
					};
				});

				var option = {
					tooltip: {
						trigger: 'item',
						formatter: '{b}: {c} ({d}%)'
					},
					backgroundColor: '#ffffff',
					legend: {
						show: true,
						left: 0,
						bottom: '5%',
					},
					grid: {
						bottom: 0
					},
					title: [{
						text: total.name,
						left: '49%',
						top: '43%',
						textAlign: 'center',
						textBaseline: 'middle',
						textStyle: {
							color: '#999',
							fontWeight: 'normal',
							fontSize: 18
						}
					}, {
						text: total.value,
						left: '49%',
						top: '52%',
						textAlign: 'center',
						textBaseline: 'middle',
						textStyle: {
							color: '#666',
							fontWeight: 'normal',
							fontSize: 30
						}
					}],
					series: [{
						hoverAnimation: false, //设置饼图默认的展开样式
						center: ['50%', '50%'],
						radius: [80, 100],
						name: 'pie',
						type: 'pie',
						selectedMode: 'single',
						selectedOffset: 16, //选中是扇区偏移量
						clockwise: true,
						startAngle: 90,
						label: {
							normal: {
								show: false
							}
						},
						labelLine: {
							normal: {
								show: false
							}
						},
						itemStyle: {
							normal: {
								borderWidth: 3,
								borderColor: '#ffffff',
							},
							emphasis: {
								borderWidth: 0,
								shadowBlur: 5,
								shadowOffsetX: 0,
								shadowColor: 'rgba(0, 0, 0, 0.2)'
							}
						},
						data: originalData
					}]
				};
                bugfaq.clear();
                bugfaq.setOption(option);
                bugfaq.resize();
                window.onresize = bugfaq.resize;
			}
			// bugFaqChart();//漏洞类型风险分布图的图2
			function bugTypeChart4(data) {
				$("#bug-type-chart4").css('width',$("#bug-type-chart2").width());
				$("#bug-type-chart4").css('height',$("#bug-type-chart2").height());

			    var colorList=['#66c5d7', '#11c88c', '#989cff', '#ffa55d', '#9c7de1', '#5d9eff', '#ffdb5d', '#ee82ed', '#8fca5f', '#b995f5'];

				var blackLinks=[data.blackLinks.high,data.blackLinks.middle,data.blackLinks.low];
				var cgi=[data.cgi.high,data.cgi.middle,data.cgi.low];
				var csrf=[data.csrf.high,data.csrf.middle,data.csrf.low];
				var formCrack=[data.formCrack.high,data.formCrack.middle,data.formCrack.low];
				console.log(formCrack);
				var infoLeak=[data.infoLeak.high,data.infoLeak.middle,data.infoLeak.low];
				var keyword=[data.keyword.high,data.keyword.middle,data.keyword.low];
				var malscan=[data.malscan.high,data.malscan.middle,data.malscan.low];
				var sql=[data.sql.high,data.sql.middle,data.sql.low];
                var webvul=[data.webvul.high,data.webvul.middle,data.webvul.low];
                var xss=[data.xss.high,data.xss.middle,data.xss.low];
				var option = '';
				option = {
					title: {
						text: 'Awesome Chart'
					},
					xAxis: {
						data: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']
					},
					yAxis: {},
					series: [{
						type: 'line',
						data: [220, 182, 191, 234, 290, 330, 310]
					}]
				};

				option = {
					tooltip: {
						trigger: 'axis',
						axisPointer: { // 坐标轴指示器，坐标轴触发有效
							type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
						}
					},
					title: {
						text: ''
					},
					legend: {
						data: ['暗链', '挂马', '关键词', 'sql注入漏洞', 'XSS跨站脚本漏洞', '应用漏洞','信息泄露' ,'CGI漏洞', 'CSRF跨站请求伪造漏洞', '表单破解漏洞']
					},
					grid: {
						left: '3%',
						right: '4%',
						bottom: '3%',
						containLabel: true
					},
					xAxis: {
						type: 'value'
					},
					yAxis: {
						type: 'category',
						data: ['高危', '中危', '低危']
					},
					series: [{
							name: '暗链',
							type: 'bar',
							barWidth: 30,
							stack: '总量',
							label: {
								normal: {
									show: false,
									position: 'insideRight'
								}
							},
							itemStyle:{
							    color:colorList[0]
							},
							data: blackLinks
						},
						{
							name: '挂马',
							type: 'bar',
							stack: '总量',
							label: {
								normal: {
									show: false,
									position: 'insideRight'
								}
							},
                            itemStyle:{
                                color:colorList[1]
                            },
							data: malscan
						},
						{
							name: '关键词',
							type: 'bar',
							stack: '总量',
							label: {
								normal: {
									show: false,
									position: 'insideRight'
								}
							},
                            itemStyle:{
                                color:colorList[2]
                            },
							data: keyword
						},
						{
							name: 'sql注入漏洞',
							type: 'bar',
							stack: '总量',
							label: {
								normal: {
									show: false,
									position: 'insideRight'
								}
							},
                            itemStyle:{
                                color:colorList[3]
                            },
							data: sql
						},
						{
							name: 'XSS跨站脚本漏洞',
							type: 'bar',
							stack: '总量',
							label: {
								normal: {
									show: false,
									position: 'insideRight'
								}
							},
                            itemStyle:{
                                color:colorList[4]
                            },
							data: xss
						},
						{
							name: '应用漏洞',
							type: 'bar',
							stack: '总量',
							label: {
								normal: {
									show: false,
									position: 'insideRight'
								}
							},
                            itemStyle:{
                                color:colorList[5]
                            },
							data: webvul
						},
                        {
                            name: '信息泄露',
                            type: 'bar',
                            stack: '总量',
                            label: {
                                normal: {
                                    show: false,
                                    position: 'insideRight'
                                }
                            },
                            itemStyle:{
                                color:colorList[6]
                            },
                            data: infoLeak
                        },
						{
							name: 'CGI漏洞',
							type: 'bar',
							stack: '总量',
							label: {
								normal: {
									show: false,
									position: 'insideRight'
								}
							},
                            itemStyle:{
                                color:colorList[7]
                            },
							data: cgi
						},
						{
							name: 'CSRF跨站请求伪造漏洞',
							type: 'bar',
							stack: '总量',
							label: {
								normal: {
									show: false,
									position: 'insideRight'
								}
							},
                            itemStyle:{
                                color:colorList[8]
                            },
							data: csrf
						},
						{
							name: '表单破解漏洞',
							type: 'bar',
							stack: '总量',
							label: {
								normal: {
									show: false,
									position: 'insideRight'
								}
							},
                            itemStyle:{
                                color:colorList[9]
                            },
							data: formCrack
						}
					]
				};
				bugtypechart4.clear();
				bugtypechart4.setOption(option);
				bugtypechart4.resize();
				window.onresize = bugtypechart4.resize;
			}
			// bugTypeChart4();

			//获取首页展示数据
            function getIndexData(){
                $.ajax({
                    type:"post",
                    url:"/perform/performData",
                    xhrFields: {withCredentials: true},
                    data:{"userId":userId},
                    dataType: "json",
                    async:true,
                    success:function(data){
                        console.log(data);
                        showIop(data);
                    }
                });
            }

            function showIop(data){
                //取出漏洞类型分布图数据
				var levelRecord=data['levelRecord'];
                //网站风险分布
				var highlevel=0;
                var midlevel=0;
                var lowlevel=0;
                var safe=0;
                var chart3Data=[];
                var bugTotal=data.bugCounts;
                $(".bg-aqua .inner span").html(data.taskCounts);
                $(".bg-green .inner span").html(data.webCounts);
                $(".bg-yellow .inner span").html(data.bugCounts);
                $(".bg-red .inner span").html(data.avgUseTime);
                //网站风险分布
				var topURL=data.topURL.reverse();
                for(var i=0;i<topURL.length;i++){
                    $("#site-faq .rank-list li").eq(i).find('.site-name').html(topURL[i].url);
                    $("#site-faq .rank-list li").eq(i).find('.score').html(topURL[i].score);
                }
				//漏洞风险分布
				//高危漏洞类型排名
				for(var i=0;i<data.topBug.length;i++){
				    var bugName=data.topBug[i];
				    for(var j in bugName){
				        if(j!='level'){
                            var rate=bugName[j]/data.bugCounts;
                            rate=rate.toFixed(2)*100;
                            $(".bug-rank-list li").eq(i).find('.bug-name').html(j);
                            $(".bug-rank-list li").eq(i).find('.count').html(bugName[j]);
                            $(".bug-rank-list li").eq(i).find('.progress-bar').css('width',rate+'%');
                            chart3Data.push(bugName[j]);
						}

					}

				}
				//网站风险分布
				for(var i=0;i<data.topURL.length;i++){

					var score=data.topURL[i].score;
					console.log(score);
					if(score>66&&score<=100){
                        highlevel=highlevel+1;
					}
                    if(score>33&&score<=66){
                        midlevel=midlevel+1;
                    }
                    if(score>0&&score<=33){
                        lowlevel=lowlevel+1;
                    }
                    if(score==0){
                        safe=safe+1;
					}
				}
				setCookie("bugFaqData",data);

				// //漏洞风险分布图
               	 bugFaqChart(data);
				//漏洞分布图
                bugTypeChart3(chart3Data,bugTotal);
				//网站风险图
                siteFaqChart(highlevel,midlevel,lowlevel,safe);
                //按漏洞分的漏洞与安全事件分布
                bugTypeChart2(levelRecord);
                //按风险等级划分漏洞
                bugTypeChart4(levelRecord);
            }
			//调取下发任务接口
            function indexAddTask(taskTypeVal,siteVal,checkItem){
				console.log(taskTypeVal);
				console.log(siteVal);
				console.log(checkItem);
				if(taskTypeVal==0){
                    $.ajax({
                        type:"post",
                        url:"http://localhost/issue/temp",
                        xhrFields: {withCredentials: true},
                        data:JSON.stringify(
                            {"urls":siteVal,
                                "blackLinks":checkItem[1],
                                "malscan":checkItem[2],
                                "keyword":checkItem[3],
                                "sqlInjection":checkItem[4],
                                "xss":checkItem[5],
                                "webvul":checkItem[6],
                                "infoLeak":checkItem[7],
                                "cgi":checkItem[8],
                                "csrf":checkItem[9],
                                "formCrack":checkItem[10]
                            }),
                        contentType: "application/json;charset=UTF-8",
                        dataType: "json",
                        async:true,
                        success:function(data){
                            if(data.code==0){
                                temTitle.find('.fa').removeClass('fa-warning');
                                temTitle.find('.fa').addClass('fa-chevron-circle-down');
                                temTitle.find('span').html('下发任务成功');
                                temAlert.html('下发临时任务成功');
                                temCover.show();
                                temPop.show();
                               //下发任务成功后跳转到任务列表
								temBtn.click(function(){
								    window.location.href="taskprogress";
								})

                            }else{
                                temTitle.find('.fa').removeClass('fa-chevron-circle-down');
                                temTitle.find('.fa').addClass('fa-warning');
                                temTitle.find('span').html('下发任务失败');
                                temAlert.html(data.message);
                                temCover.show();
                                temPop.show();

                            }

                        }
                    });
				}else{
                    //周期任务调取接口
                    $.ajax({
                        type:"post",
                        url:"http://localhost/issue/period",
                        xhrFields: {withCredentials: true},
                        data:JSON.stringify(
                            {"urls":siteVal,
                                "blackLinks":checkItem[1],
                                "malscan":checkItem[2],
                                "keyword":checkItem[3],
                                "sqlInjection":checkItem[4],
                                "xss":checkItem[5],
                                "webvul":checkItem[6],
                                "infoLeak":checkItem[7],
                                "cgi":checkItem[8],
                                "csrf":checkItem[9],
                                "formCrack":checkItem[10]
                            }),
                        contentType: "application/json;charset=UTF-8",
                        dataType: "json",
                        async:true,
                        success:function(data){
                            if(data.code==0){
                                temTitle.find('.fa').removeClass('fa-warning');
                                temTitle.find('.fa').addClass('fa-chevron-circle-down');
                                temTitle.find('span').html('下发任务成功');
                                temAlert.html('下发周期任务成功');
                                temCover.show();
                                temPop.show();
                            }else{
                                temTitle.find('.fa').removeClass('fa-chevron-circle-down');
                                temTitle.find('.fa').addClass('fa-warning');
                                temTitle.find('span').html('下发任务失败');
                                temAlert.html(data.message);
                                temCover.show();
                                temPop.show();
                            }
                        }
                    });
				}
			}

		</script>
	</body>
</html>